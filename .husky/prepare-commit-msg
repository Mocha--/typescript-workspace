#!/bin/sh

# Run the AI script and store the output
echo "creating ai commit message..."
AI_MSG=$(node .husky/ai-commit-message.js 2>/dev/null) || AI_MSG=""
if [ $? -ne 0 ]; then
  AI_MSG=""
fi
echo "ai commit message: $AI_MSG"

# Create a temporary file
TMP_FILE=$(mktemp)

# Write the AI-generated message to the temporary file
echo "$AI_MSG" > "$TMP_FILE"

# Append the original commit message to the temporary file
cat "$1" >> "$TMP_FILE"

# Overwrite the original commit message file with the content of the temporary file
cat "$TMP_FILE" > "$1"

# Remove the temporary file
rm "$TMP_FILE"
